@page
@model RegRezervationsindexModel
@{
    ViewData["Title"] = "Pagrindinis langas";
}
@{
    Layout = "_LayoutRegistrationWorkers";
}

@{
    Model.GetRezervations();
}

<div class="text-center">
    <h1 class="display-4">Rezervacijos</h1>
    <center>
        @if(Model.success == 1)
            {
                <h6 style="color:forestgreen">Rezervacija sėkmingai patvirtinta, klientas įregistruotas</h6>
            }
        <table class="table-striped">
            <thead>
                <tr>
                    <th>Nr</th>
                    <th>Pradžia</th>
                    <th>Pabaiga</th>
                    <th>Būsena</th>
                    <th>Kambario Nr.</th>
                </tr>
            </thead>
            <tbody>
                @{
                    if (Model.rezervacijos.Count == 0)
                    {
                        <tr><td colspan="5">Neturite kamberių</td></tr>
                    }
                }
                @{
                    for (int i = 0; i < Model.rezervacijos.Count; i++)
                    {
                                <tr>
                                    <td>@Model.rezervacijos[i].ID</td>
                                    <td>@Model.rezervacijos[i].Starts.ToString("yyyy/MM/dd")</td>
                                    <td>@Model.rezervacijos[i].Ends.ToString("yyyy/MM/dd")</td>
                                    <td>@Model.rezervacijos[i].Status</td>
                                    <td>@Model.rezervacijos[i].RoomNumber</td>
                                    @if (Model.rezervacijos[i].Status.Contains("laukiama"))
                                    {

                                        <td><a asp-area="" asp-page="/Registration/ApproveReservation" asp-route-ID="@Model.rezervacijos[i].ID" asp-route-ID2="@Model.rezervacijos[i].RoomNumber"><input type="submit" class="btn btn-success" value="Patvirtinti" /></a></td>
                                    }
                                    <td><a asp-area="" asp-page="/Registration/RegCreateBill" asp-route-ID="@Model.rezervacijos[i].ID"><input type="submit" class="btn btn-success" value="Sudaryti sąskaitą" /></a></td>
                                </tr>
                    }
                }
            </tbody>
        </table>
    </center>
</div>
